(function(h){"function"===typeof define&&define.amd?define(["jquery"],h):"object"===typeof module&&module.exports?module.exports=h(require("jquery")):h(window.jQuery)})(function(h){var p=function(){var a=0;return{eq:function(a){return function(b){return a===b}},eq2:function(a,b){return a===b},peq2:function(a){return function(b,g){return b[a]===g[a]}},ok:function(){return!0},fail:function(){return!1},self:function(a){return a},not:function(a){return function(){return!a.apply(a,arguments)}},and:function(a,
b){return function(g){return a(g)&&b(g)}},invoke:function(a,b){return function(){return a[b].apply(a,arguments)}},uniqueId:function(d){var b=++a+"";return d?d+b:b},rect2bnd:function(a){var b=h(document);return{top:a.top+b.scrollTop(),left:a.left+b.scrollLeft(),width:a.right-a.left,height:a.bottom-a.top}},invertObject:function(a){var b={},g;for(g in a)a.hasOwnProperty(g)&&(b[a[g]]=g);return b},namespaceToCamel:function(a,b){return(b||"")+a.split(".").map(function(a){return a.substring(0,1).toUpperCase()+
a.substring(1)}).join("")}}}(),l=function(){var a=function(a){return a[a.length-1]},d=function(a){return a.slice(1)},b=function(a,c){return-1!==h.inArray(c,a)};return{head:function(a){return a[0]},last:a,initial:function(a){return a.slice(0,a.length-1)},tail:d,prev:function(a,c){var b=h.inArray(c,a);return-1===b?null:a[b-1]},next:function(a,c){var b=h.inArray(c,a);return-1===b?null:a[b+1]},find:function(a,c){for(var b=0,f=a.length;b<f;b++){var d=a[b];if(c(d))return d}},contains:b,all:function(a,b){for(var k=
0,f=a.length;k<f;k++)if(!b(a[k]))return!1;return!0},sum:function(a,b){b=b||p.self;return a.reduce(function(a,f){return a+b(f)},0)},from:function(a){for(var b=[],k=-1,f=a.length;++k<f;)b[k]=a[k];return b},isEmpty:function(a){return!a||!a.length},clusterBy:function(b,c){return b.length?d(b).reduce(function(b,f){var g=a(b);c(a(g),f)?g[g.length]=f:b[b.length]=[f];return b},[[b[0]]]):[]},compact:function(a){for(var b=[],d=0,f=a.length;d<f;d++)a[d]&&b.push(a[d]);return b},unique:function(a){for(var c=[],
d=0,f=a.length;d<f;d++)b(c,a[d])||c.push(a[d]);return c}}}(),G="function"===typeof define&&define.amd,x=navigator.userAgent,B=/MSIE|Trident/i.test(x),D;if(B){var y=/MSIE (\d+[.]\d+)/.exec(x);y&&(D=parseFloat(y[1]));(y=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(x))&&(D=parseFloat(y[1]))}var y=/Edge\/\d+/.test(x),A=!!window.CodeMirror;if(!A&&G&&require)if(require.hasOwnProperty("resolve"))try{require.resolve("codemirror"),A=!0}catch(a){A=!1}else require.hasOwnProperty("specified")&&(A=require.specified("codemirror"));
var t={isMac:-1<navigator.appVersion.indexOf("Mac"),isMSIE:B,isEdge:y,isFF:!y&&/firefox/i.test(x),isPhantom:/PhantomJS/i.test(x),isWebkit:!y&&/webkit/i.test(x),isChrome:!y&&/chrome/i.test(x),isSafari:!y&&/safari/i.test(x),browserVersion:D,jqueryVersion:parseFloat(h.fn.jquery),isSupportAmd:G,hasCodeMirror:A,isFontInstalled:function(a){var d="Comic Sans MS"===a?"Courier New":"Comic Sans MS",b=h("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),
g=b.css("fontFamily",d).width();a=b.css("fontFamily",a+","+d).width();b.remove();return g!==a},isW3CRangeSupport:!!document.createRange},U=String.fromCharCode(160),e=function(){var a=function(a){return a&&h(a).hasClass("note-editable")},d=function(a){a=a.toUpperCase();return function(b){return b&&b.nodeName.toUpperCase()===a}},b=function(a){return a&&3===a.nodeType},g=function(a){return a&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(a.nodeName.toUpperCase())},c=function(b){return a(b)?!1:b&&/^DIV|^P|^LI|^H[1-7]/.test(b.nodeName.toUpperCase())},
k=d("PRE"),f=d("LI"),m=d("TABLE"),n=function(a){return!E(a)&&!w(a)&&!K(a)&&!c(a)&&!m(a)&&!Q(a)},w=function(a){return a&&/^UL|^OL/.test(a.nodeName.toUpperCase())},K=d("HR"),L=function(a){return a&&/^TD|^TH/.test(a.nodeName.toUpperCase())},Q=d("BLOCKQUOTE"),E=function(b){return L(b)||Q(b)||a(b)},C=d("A"),F=d("BODY"),q=t.isMSIE&&11>t.browserVersion?"&nbsp;":"<br>",u=function(a){return b(a)?a.nodeValue.length:a.childNodes.length},v=function(a){var c=u(a);return 0===c||!b(a)&&1===c&&a.innerHTML===q||l.all(a.childNodes,
b)&&""===a.innerHTML?!0:!1},P=function(b,c){for(;b;){if(c(b))return b;if(a(b))break;b=b.parentNode}return null},I=function(b,c){c=c||p.fail;var f=[];P(b,function(b){a(b)||f.push(b);return c(b)});return f},V=function(a,b){b=b||p.fail;for(var c=[];a&&!b(a);)c.push(a),a=a.nextSibling;return c},r=function(a,b){var c=b.nextSibling,f=b.parentNode;c?f.insertBefore(a,c):f.appendChild(a);return a},y=function(a,b){h.each(b,function(b,c){a.appendChild(c)});return a},x=function(a){return 0===a.offset},z=function(a){return a.offset===
u(a.node)},A=function(a){return x(a)||z(a)},D=function(a,b){for(;a&&a!==b;){if(0!==J(a))return!1;a=a.parentNode}return!0},G=function(a,b){for(;a&&a!==b;){if(J(a)!==u(a.parentNode)-1)return!1;a=a.parentNode}return!0},J=function(a){for(var b=0;a=a.previousSibling;)b+=1;return b},B=function(a){return!!(a&&a.childNodes&&a.childNodes.length)},H=function(b,c){var f,g;if(0===b.offset){if(a(b.node))return null;f=b.node.parentNode;g=J(b.node)}else B(b.node)?(f=b.node.childNodes[b.offset-1],g=u(f)):(f=b.node,
g=c?0:b.offset-1);return{node:f,offset:g}},R=function(b,c){var f,g;if(u(b.node)===b.offset){if(a(b.node))return null;f=b.node.parentNode;g=J(b.node)+1}else B(b.node)?(f=b.node.childNodes[b.offset],g=0):(f=b.node,g=c?u(b.node):b.offset+1);return{node:f,offset:g}},M=function(a,b){return a.node===b.node&&a.offset===b.offset},S=function(a,c){var f=c&&c.isSkipPaddingBlankHTML,d=c&&c.isNotSplitEdgePoint;if(A(a)&&(b(a.node)||d)){if(x(a))return a.node;if(z(a))return a.node.nextSibling}if(b(a.node))return a.node.splitText(a.offset);
var k=a.node.childNodes[a.offset],d=r(a.node.cloneNode(!1),a.node);y(d,V(k));f||(f=a.node,g(f)||u(f)||(f.innerHTML=q),g(d)||u(d)||(d.innerHTML=q));return d},N=function(a,b,c){a=I(b.node,p.eq(a));return a.length?1===a.length?S(b,c):a.reduce(function(a,f){a===b.node&&(a=S(b,c));return S({node:f,offset:a?e.position(a):u(f)},c)}):null},O=function(a){return document.createElement(a)},T=function(a,b){if(a&&a.parentNode){if(a.removeNode)return a.removeNode(b);var c=a.parentNode;if(!b){var f=[],g,d;g=0;for(d=
a.childNodes.length;g<d;g++)f.push(a.childNodes[g]);g=0;for(d=f.length;g<d;g++)c.insertBefore(f[g],a)}c.removeChild(a)}},W=d("TEXTAREA"),X=function(a,b){var c=W(a[0])?a.val():a.html();return b?c.replace(/[\n\r]/g,""):c};return{NBSP_CHAR:U,ZERO_WIDTH_NBSP_CHAR:"\ufeff",blank:q,emptyPara:"<p>"+q+"</p>",makePredByNodeName:d,isEditable:a,isControlSizing:function(a){return a&&h(a).hasClass("note-control-sizing")},isText:b,isElement:function(a){return a&&1===a.nodeType},isVoid:g,isPara:c,isPurePara:function(a){return c(a)&&
!f(a)},isHeading:function(a){return a&&/^H[1-7]/.test(a.nodeName.toUpperCase())},isInline:n,isBlock:p.not(n),isBodyInline:function(a){return n(a)&&!P(a,c)},isBody:F,isParaInline:function(a){return n(a)&&!!P(a,c)},isPre:k,isList:w,isTable:m,isCell:L,isBlockquote:Q,isBodyContainer:E,isAnchor:C,isDiv:d("DIV"),isLi:f,isBR:d("BR"),isSpan:d("SPAN"),isB:d("B"),isU:d("U"),isS:d("S"),isI:d("I"),isImg:d("IMG"),isTextarea:W,isEmpty:v,isEmptyAnchor:p.and(C,v),isClosestSibling:function(a,b){return a.nextSibling===
b||a.previousSibling===b},withClosestSiblings:function(a,b){b=b||p.ok;var c=[];a.previousSibling&&b(a.previousSibling)&&c.push(a.previousSibling);c.push(a);a.nextSibling&&b(a.nextSibling)&&c.push(a.nextSibling);return c},nodeLength:u,isLeftEdgePoint:x,isRightEdgePoint:z,isEdgePoint:A,isLeftEdgeOf:D,isRightEdgeOf:G,isLeftEdgePointOf:function(a,b){return x(a)&&D(a.node,b)},isRightEdgePointOf:function(a,b){return z(a)&&G(a.node,b)},prevPoint:H,nextPoint:R,isSamePoint:M,isVisiblePoint:function(a){if(b(a.node)||
!B(a.node)||v(a.node))return!0;var c=a.node.childNodes[a.offset-1];a=a.node.childNodes[a.offset];return c&&!g(c)||a&&!g(a)?!1:!0},prevPointUntil:function(a,b){for(;a;){if(b(a))return a;a=H(a)}return null},nextPointUntil:function(a,b){for(;a;){if(b(a))return a;a=R(a)}return null},isCharPoint:function(a){return b(a.node)?(a=a.node.nodeValue.charAt(a.offset-1))&&" "!==a&&a!==U:!1},walkPoint:function(a,b,c,f){for(var g=a;g;){c(g);if(M(g,b))break;g=R(g,f&&a.node!==g.node&&b.node!==g.node)}},ancestor:P,
singleChildAncestor:function(b,c){for(b=b.parentNode;b&&1===u(b);){if(c(b))return b;if(a(b))break;b=b.parentNode}return null},listAncestor:I,lastAncestor:function(a,b){var c=I(a);return l.last(c.filter(b))},listNext:V,listPrev:function(a,b){b=b||p.fail;for(var c=[];a&&!b(a);)c.push(a),a=a.previousSibling;return c},listDescendant:function(a,b){var c=[];b=b||p.ok;(function Y(f){a!==f&&b(f)&&c.push(f);for(var g=0,d=f.childNodes.length;g<d;g++)Y(f.childNodes[g])})(a);return c},commonAncestor:function(a,
b){for(var c=I(a),f=b;f;f=f.parentNode)if(-1<h.inArray(f,c))return f;return null},wrap:function(a,b){var c=a.parentNode,f=h("<"+b+">")[0];c.insertBefore(f,a);f.appendChild(a);return f},insertAfter:r,appendChildNodes:y,position:J,hasChildren:B,makeOffsetPath:function(a,b){return I(b,p.eq(a)).map(J).reverse()},fromOffsetPath:function(a,b){for(var c=a,f=0,g=b.length;f<g;f++)c=c.childNodes.length<=b[f]?c.childNodes[c.childNodes.length-1]:c.childNodes[b[f]];return c},splitTree:N,splitPoint:function(a,
b){var f=b?c:E,g=I(a.node,f),d=l.last(g)||a.node;f(d)?f=g[g.length-2]:(f=d,d=f.parentNode);(f=f&&N(f,a,{isSkipPaddingBlankHTML:b,isNotSplitEdgePoint:b}))||d!==a.node||(f=a.node.childNodes[a.offset]);return{rightNode:f,container:d}},create:O,createText:function(a){return document.createTextNode(a)},remove:T,removeWhile:function(b,c){for(;b&&!a(b)&&c(b);){var f=b.parentNode;T(b);b=f}},replace:function(a,b){if(a.nodeName.toUpperCase()===b.toUpperCase())return a;var c=O(b);a.style.cssText&&(c.style.cssText=
a.style.cssText);y(c,l.from(a.childNodes));r(c,a);T(a);return c},html:function(a,b){var c=X(a);b&&(c=c.replace(/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g,function(a,b,c){c=c.toUpperCase();b=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(c)&&!!b;c=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(c);return a+(b||c?"\n":"")}),c=h.trim(c));return c},value:X,posFromPlaceholder:function(a){var b=h(a);a=b.offset();b=b.outerHeight(!0);return{left:a.left,top:a.top+b}},attachEvents:function(a,b){Object.keys(b).forEach(function(c){a.on(c,
b[c])})},detachEvents:function(a,b){Object.keys(b).forEach(function(c){a.off(c,b[c])})}}}(),Z=function(a,d){var b=this,g=h.summernote.ui;this.memos={};this.modules={};this.layoutInfo={};this.options=d;this.initialize=function(){this.layoutInfo=g.createLayout(a,d);this._initialize();a.hide();return this};this.destroy=function(){this._destroy();a.removeData("summernote");g.removeLayout(a,this.layoutInfo)};this.reset=function(){var a=b.isDisabled();this.code(e.emptyPara);this._destroy();this._initialize();
a&&b.disable()};this._initialize=function(){var a=h.extend({},this.options.buttons);Object.keys(a).forEach(function(f){b.memo("button."+f,a[f])});var g=h.extend({},this.options.modules,h.summernote.plugins||{});Object.keys(g).forEach(function(a){b.module(a,g[a],!0)});Object.keys(this.modules).forEach(function(a){b.initializeModule(a)})};this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(a){b.removeModule(a)});Object.keys(this.memos).forEach(function(a){b.removeMemo(a)})};
this.code=function(b){var g=this.invoke("codeview.isActivated");if(void 0===b)return this.invoke("codeview.sync"),g?this.layoutInfo.codable.val():this.layoutInfo.editable.html();g?this.layoutInfo.codable.val(b):this.layoutInfo.editable.html(b);a.val(b);this.triggerEvent("change",b)};this.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")};this.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0);this.invoke("toolbar.activate",!0)};this.disable=
function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate");this.layoutInfo.editable.attr("contenteditable",!1);this.invoke("toolbar.deactivate",!0)};this.triggerEvent=function(){var b=l.head(arguments),g=l.tail(l.from(arguments)),f=this.options.callbacks[p.namespaceToCamel(b,"on")];f&&f.apply(a[0],g);a.trigger("summernote."+b,g)};this.initializeModule=function(b){b=this.modules[b];b.shouldInitialize=b.shouldInitialize||p.ok;b.shouldInitialize()&&(b.initialize&&b.initialize(),
b.events&&e.attachEvents(a,b.events))};this.module=function(a,b,f){if(1===arguments.length)return this.modules[a];this.modules[a]=new b(this);f||this.initializeModule(a)};this.removeModule=function(b){var g=this.modules[b];g.shouldInitialize()&&(g.events&&e.detachEvents(a,g.events),g.destroy&&g.destroy());delete this.modules[b]};this.memo=function(a,b){if(1===arguments.length)return this.memos[a];this.memos[a]=b};this.removeMemo=function(a){this.memos[a]&&this.memos[a].destroy&&this.memos[a].destroy();
delete this.memos[a]};this.createInvokeHandler=function(a,g){return function(f){f.preventDefault();b.invoke(a,g||h(f.target).closest("[data-value]").data("value"))}};this.invoke=function(){var a=l.head(arguments),b=l.tail(l.from(arguments)),f=a.split("."),g=1<f.length,a=g&&l.head(f),f=g?l.last(f):l.head(f),g=this.modules[a||"editor"];if(!a&&this[f])return this[f].apply(this,b);if(g&&g[f]&&g.shouldInitialize())return g[f].apply(g,b)};return this.initialize()};h.fn.extend({summernote:function(){var a=
h.type(l.head(arguments)),d="string"===a,b="object"===a?l.head(arguments):{},b=h.extend({},h.summernote.options,b);b.langInfo=h.extend(!0,{},h.summernote.lang["en-US"],h.summernote.lang[b.lang]);this.each(function(a,c){var d=h(c);if(!d.data("summernote")){var f=new Z(d,b);d.data("summernote",f);d.data("summernote").triggerEvent("init",f.layoutInfo)}});a=this.first();if(a.length){a=a.data("summernote");if(d)return a.invoke.apply(a,l.from(arguments));b.focus&&a.invoke("editor.focus")}return this}});
var aa=function(a,d,b,g){this.render=function(c){var k=h(a);b&&b.contents&&k.html(b.contents);b&&b.className&&k.addClass(b.className);b&&b.data&&h.each(b.data,function(a,b){k.attr("data-"+a,b)});if(b&&b.click)k.on("click",b.click);if(d){var f=k.find(".note-children-container");d.forEach(function(a){a.render(f.length?f:k)})}g&&g(k,b);b&&b.callback&&b.callback(k);c&&c.append(k);return k}},r={create:function(a,d){return function(b,g){var c=h.isArray(b)?b:[],k="object"===typeof g?g:b;k&&k.children&&(c=
k.children);return new aa(a,c,k,d)}}},G=r.create('<div class="note-editor note-frame panel panel-default"/>'),x=r.create('<div class="note-toolbar panel-heading"/>'),B=r.create('<div class="note-editing-area"/>');D=r.create('<textarea class="note-codable"/>');var y=r.create('<div class="note-editable panel-body" contentEditable="true"/>'),A=r.create('<div class="note-statusbar">  <div class="note-resizebar">    <div class="note-icon-bar"/>    <div class="note-icon-bar"/>    <div class="note-icon-bar"/>  </div></div>'),
ba=r.create('<div class="note-editor"/>'),ca=r.create('<div class="note-editable" contentEditable="true"/>'),da=r.create('<div class="note-btn-group btn-group">'),ea=r.create('<button type="button" class="note-btn btn btn-default btn-sm">',function(a,d){d&&d.tooltip&&a.attr({title:d.tooltip}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}),fa=r.create('<div class="dropdown-menu">',function(a,d){var b=h.isArray(d.items)?d.items.map(function(a){var b="string"===typeof a?a:a.value||
"";a=d.template?d.template(a):a;return'<li><a href="#" data-value="'+b+'">'+a+"</a></li>"}).join(""):d.items;a.html(b)}),ga=r.create('<div class="dropdown-menu note-check">',function(a,d){var b=h.isArray(d.items)?d.items.map(function(a){var b="string"===typeof a?a:a.value||"";a=d.template?d.template(a):a;return'<li><a href="#" data-value="'+b+'">'+M(d.checkClassName)+" "+a+"</a></li>"}).join(""):d.items;a.html(b)}),ha=r.create('<div class="note-color-palette"/>',function(a,d){for(var b=[],g=0,c=d.colors.length;g<
c;g++){for(var k=d.eventName,f=d.colors[g],e=[],n=0,w=f.length;n<w;n++){var h=f[n];e.push(['<button type="button" class="note-color-btn"style="background-color:',h,'" data-event="',k,'" data-value="',h,'" title="',h,'" data-toggle="button" tabindex="-1"></button>'].join(""))}b.push('<div class="note-color-row">'+e.join("")+"</div>")}a.html(b.join(""));a.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})}),ia=r.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',
function(a,d){d.fade&&a.addClass("fade");a.html(['<div class="modal-dialog">  <div class="modal-content">',d.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>      <h4 class="modal-title">'+d.title+"</h4>    </div>":"",'    <div class="modal-body">'+d.body+"</div>",d.footer?'    <div class="modal-footer">'+d.footer+"</div>":"","  </div></div>"].join(""))}),r=r.create('<div class="note-popover popover in">  <div class="arrow"/>  <div class="popover-content note-children-container"/></div>',
function(a,d){a.addClass("undefined"!==typeof d.direction?d.direction:"bottom");d.hideArrow&&a.find(".arrow").hide()}),M=function(a,d){return"<"+(d||"i")+' class="'+a+'"/>'},z={editor:G,toolbar:x,editingArea:B,codable:D,editable:y,statusbar:A,airEditor:ba,airEditable:ca,buttonGroup:da,button:ea,dropdown:fa,dropdownCheck:ga,palette:ha,dialog:ia,popover:r,icon:M,toggleBtn:function(a,d){a.toggleClass("disabled",!d);a.attr("disabled",!d)},toggleBtnActive:function(a,d){a.toggleClass("active",d)},onDialogShown:function(a,
d){a.one("shown.bs.modal",d)},onDialogHidden:function(a,d){a.one("hidden.bs.modal",d)},showDialog:function(a){a.modal("show")},hideDialog:function(a){a.modal("hide")},createLayout:function(a,d){var b=(d.airMode?z.airEditor([z.editingArea([z.airEditable()])]):z.editor([z.toolbar(),z.editingArea([z.codable(),z.editable()]),z.statusbar()])).render();b.insertAfter(a);return{note:a,editor:b,toolbar:b.find(".note-toolbar"),editingArea:b.find(".note-editing-area"),editable:b.find(".note-editable"),codable:b.find(".note-codable"),
statusbar:b.find(".note-statusbar")}},removeLayout:function(a,d){a.html(d.editable.html());d.editor.remove();a.show()}};h.summernote=h.summernote||{lang:{}};h.extend(h.summernote.lang,{"en-US":{font:{bold:"\u52a0\u7c97",italic:"\u659c\u4f53",underline:"\u4e0b\u5212\u7ebf",clear:"\u6d88\u9664\u5b57\u4f53\u6837\u5f0f",height:"\u884c\u9ad8",name:"\u5b57\u4f53",strikethrough:"\u6d88\u9664\u7ebf",subscript:"\u4e0b\u6807",superscript:"\u4e0a\u6807",size:"\u5b57\u4f53\u5927\u5c0f"},image:{image:"\u56fe\u7247",
insert:"\u63d2\u5165\u56fe\u7247",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"\u9009\u62e9\u6587\u4ef6",maximumFileSize:"\u6700\u5927\u6587\u4ef6\u503c",maximumFileSizeError:"\u8d85\u51fa\u6700\u5927\u6587\u4ef6\u503c.",
url:"\u56fe\u7247\u94fe\u63a5",remove:"\u79fb\u9664\u56fe\u7247"},video:{video:"\u89c6\u9891",videoLink:"\u89c6\u9891\u94fe\u63a5",insert:"\u63d2\u5165\u89c6\u9891",url:"\u89c6\u9891\u94fe\u63a5\u5730\u5740",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"\u94fe\u63a5",insert:"\u63d2\u5165\u94fe\u63a5",unlink:"\u6d88\u9664\u94fe\u63a5",edit:"\u7f16\u8f91",textToDisplay:"\u663e\u793a\u6587\u5b57",url:"\u94fe\u63a5\u5730\u5740",openInNewWindow:"\u65b0\u7a97\u53e3\u4e2d\u6253\u5f00"},
table:{table:"\u8868\u683c"},hr:{insert:"\u63d2\u5165\u6c34\u5e73\u7ebf"},style:{style:"\u6837\u5f0f",normal:"\u666e\u901a",blockquote:"\u5f15\u7528",pre:"\u4ee3\u7801",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"\u65e0\u5e8f\u5217\u8868",ordered:"\u6709\u5e8f\u5217\u8868"},options:{help:"\u5e2e\u52a9",fullscreen:"\u5168\u5c4f",codeview:"\u6e90\u7801"},paragraph:{paragraph:"\u6bb5\u843d",outdent:"\u5de6\u7f29\u8fdb",indent:"\u53f3\u7f29\u8fdb",
left:"\u5de6\u5bf9\u9f50",center:"\u4e2d\u95f4\u5bf9\u9f50",right:"\u53f3\u5bf9\u9f50",justify:"\u4e24\u7aef\u5bf9\u9f50"},color:{recent:"\u5e95\u8272",more:"\u66f4\u591a\u989c\u8272",background:"\u80cc\u666f\u8272",foreground:"\u524d\u666f\u8272",transparent:"\u900f\u660e",setTransparent:"\u8bbe\u7f6e\u900f\u660e\u5ea6",reset:"\u91cd\u7f6e",resetToDefault:"\u6062\u590d\u9ed8\u8ba4"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",
documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",
insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule",
"linkDialog.show":"Show Link Dialog"},history:{undo:"\u64a4\u9500",redo:"\u91cd\u590d"},specialChar:{specialChar:"\u7279\u6b8a\u5b57\u7b26",select:"\u9009\u62e9\u7279\u6b8a\u5b57\u7b26"}}});var v=function(){var a={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(d){return l.contains([a.BACKSPACE,
a.TAB,a.ENTER,a.SPACE],d)},isMove:function(d){return l.contains([a.LEFT,a.UP,a.RIGHT,a.DOWN],d)},nameFromCode:p.invertObject(a),code:a}}(),q=function(){var a=function(a,b){var d=a.parentElement(),f,m=document.body.createTextRange(),n,w=l.from(d.childNodes);for(f=0;f<w.length;f++)if(!e.isText(w[f])){m.moveToElementText(w[f]);if(0<=m.compareEndPoints("StartToStart",a))break;n=w[f]}if(0!==f&&e.isText(w[f-1])){m=document.body.createTextRange();f=null;m.moveToElementText(n||d);m.collapse(!n);f=n?n.nextSibling:
d.firstChild;d=a.duplicate();d.setEndPoint("StartToStart",m);for(n=d.text.replace(/[\r\n]/g,"").length;n>f.nodeValue.length&&f.nextSibling;)n-=f.nodeValue.length,f=f.nextSibling;b&&f.nextSibling&&e.isText(f.nextSibling)&&n===f.nodeValue.length&&(n-=f.nodeValue.length,f=f.nextSibling);d=f;f=n}return{cont:d,offset:f}},d=function(a){var b=function(a,g){var d,k;if(e.isText(a)){k=e.listPrev(a,p.not(e.isText));var h=l.last(k).previousSibling;d=h||a.parentNode;g+=l.sum(l.tail(k),e.nodeLength);k=!h}else{d=
a.childNodes[g]||a;if(e.isText(d))return b(d,0);g=0;k=!1}return{node:d,collapseToStart:k,offset:g}},d=document.body.createTextRange();a=b(a.node,a.offset);d.moveToElementText(a.node);d.collapse(a.collapseToStart);d.moveStart("character",a.offset);return d},b=function(a,c,k,f){this.sc=a;this.so=c;this.ec=k;this.eo=f;var m=function(){if(t.isW3CRangeSupport){var b=document.createRange();b.setStart(a,c);b.setEnd(k,f);return b}b=d({node:a,offset:c});b.setEndPoint("EndToEnd",d({node:k,offset:f}));return b};
this.getPoints=function(){return{sc:a,so:c,ec:k,eo:f}};this.getStartPoint=function(){return{node:a,offset:c}};this.getEndPoint=function(){return{node:k,offset:f}};this.select=function(){var a=m();if(t.isW3CRangeSupport){var b=document.getSelection();0<b.rangeCount&&b.removeAllRanges();b.addRange(a)}else a.select();return this};this.scrollIntoView=function(a){var b=h(a).height();a.scrollTop+b<this.sc.offsetTop&&(a.scrollTop+=Math.abs(a.scrollTop+b-this.sc.offsetTop));return this};this.normalize=function(){var a=
function(a,b){if(e.isVisiblePoint(a)&&!e.isEdgePoint(a)||e.isVisiblePoint(a)&&e.isRightEdgePoint(a)&&!b||e.isVisiblePoint(a)&&e.isLeftEdgePoint(a)&&b||e.isVisiblePoint(a)&&e.isBlock(a.node)&&e.isEmpty(a.node))return a;var c=e.ancestor(a.node,e.isBlock);if((e.isLeftEdgePointOf(a,c)||e.isVoid(e.prevPoint(a).node))&&!b||(e.isRightEdgePointOf(a,c)||e.isVoid(e.nextPoint(a).node))&&b){if(e.isVisiblePoint(a))return a;b=!b}return(b?e.nextPointUntil(e.nextPoint(a),e.isVisiblePoint):e.prevPointUntil(e.prevPoint(a),
e.isVisiblePoint))||a},c=a(this.getEndPoint(),!1),a=this.isCollapsed()?c:a(this.getStartPoint(),!0);return new b(a.node,a.offset,c.node,c.offset)};this.nodes=function(a,b){a=a||p.ok;var c=b&&b.includeAncestor,f=b&&b.fullyContains,d=this.getStartPoint(),g=this.getEndPoint(),k=[],n=[];e.walkPoint(d,g,function(b){if(!e.isEditable(b.node)){var d;f?(e.isLeftEdgePoint(b)&&n.push(b.node),e.isRightEdgePoint(b)&&l.contains(n,b.node)&&(d=b.node)):d=c?e.ancestor(b.node,a):b.node;d&&a(d)&&k.push(d)}},!0);return l.unique(k)};
this.commonAncestor=function(){return e.commonAncestor(a,k)};this.expand=function(d){var n=e.ancestor(a,d);d=e.ancestor(k,d);if(!n&&!d)return new b(a,c,k,f);var m=this.getPoints();n&&(m.sc=n,m.so=0);d&&(m.ec=d,m.eo=e.nodeLength(d));return new b(m.sc,m.so,m.ec,m.eo)};this.collapse=function(d){return d?new b(a,c,a,c):new b(k,f,k,f)};this.splitText=function(){var d=a===k,n=this.getPoints();e.isText(k)&&!e.isEdgePoint(this.getEndPoint())&&k.splitText(f);e.isText(a)&&!e.isEdgePoint(this.getStartPoint())&&
(n.sc=a.splitText(c),n.so=0,d&&(n.ec=n.sc,n.eo=f-c));return new b(n.sc,n.so,n.ec,n.eo)};this.deleteContents=function(){if(this.isCollapsed())return this;var a=this.splitText(),c=a.nodes(null,{fullyContains:!0}),f=e.prevPointUntil(a.getStartPoint(),function(a){return!l.contains(c,a.node)}),d=[];h.each(c,function(a,b){var c=b.parentNode;f.node!==c&&1===e.nodeLength(c)&&d.push(c);e.remove(b,!1)});h.each(d,function(a,b){e.remove(b,!1)});return(new b(f.node,f.offset,f.node,f.offset)).normalize()};var n=
function(b){return function(){var c=e.ancestor(a,b);return!!c&&c===e.ancestor(k,b)}};this.isOnEditable=n(e.isEditable);this.isOnList=n(e.isList);this.isOnAnchor=n(e.isAnchor);this.isOnCell=n(e.isCell);this.isLeftEdgeOf=function(a){return e.isLeftEdgePoint(this.getStartPoint())?(a=e.ancestor(this.sc,a))&&e.isLeftEdgeOf(this.sc,a):!1};this.isCollapsed=function(){return a===k&&c===f};this.wrapBodyInlineWithPara=function(){if(e.isBodyContainer(a)&&e.isEmpty(a))return a.innerHTML=e.emptyPara,new b(a.firstChild,
0,a.firstChild,0);var c=this.normalize();if(e.isParaInline(a)||e.isPara(a))return c;var f;if(e.isInline(c.sc)){var d=e.listAncestor(c.sc,p.not(e.isInline));f=l.last(d);e.isInline(f)||(f=d[d.length-2]||c.sc.childNodes[c.so])}else f=c.sc.childNodes[0<c.so?c.so-1:0];c=e.listPrev(f,e.isParaInline).reverse();c=c.concat(e.listNext(f.nextSibling,e.isParaInline));c.length&&(f=e.wrap(l.head(c),"p"),e.appendChildNodes(f,l.tail(c)));return this.normalize()};this.insertNode=function(a){var b=this.wrapBodyInlineWithPara().deleteContents(),
b=e.splitPoint(b.getStartPoint(),e.isInline(a));b.rightNode?b.rightNode.parentNode.insertBefore(a,b.rightNode):b.container.appendChild(a);return a};this.pasteHTML=function(a){a=h("<div></div>").html(a)[0];a=l.from(a.childNodes);var b=this.wrapBodyInlineWithPara().deleteContents();return a.reverse().map(function(a){return b.insertNode(a)}).reverse()};this.toString=function(){var a=m();return t.isW3CRangeSupport?a.toString():a.text};this.getWordRange=function(a){var c=this.getEndPoint();if(!e.isCharPoint(c))return this;
var f=e.prevPointUntil(c,function(a){return!e.isCharPoint(a)});a&&(c=e.nextPointUntil(c,function(a){return!e.isCharPoint(a)}));return new b(f.node,f.offset,c.node,c.offset)};this.bookmark=function(b){return{s:{path:e.makeOffsetPath(b,a),offset:c},e:{path:e.makeOffsetPath(b,k),offset:f}}};this.paraBookmark=function(b){return{s:{path:l.tail(e.makeOffsetPath(l.head(b),a)),offset:c},e:{path:l.tail(e.makeOffsetPath(l.last(b),k)),offset:f}}};this.getClientRects=function(){return m().getClientRects()}};
return{create:function(a,c,d,f){if(4===arguments.length)return new b(a,c,d,f);if(2===arguments.length)return new b(a,c,a,c);var m=this.createFromSelection();return m||1!==arguments.length?m:(m=this.createFromNode(arguments[0]),m.collapse(e.emptyPara===arguments[0].innerHTML))},createFromSelection:function(){var d,c,k,f;if(t.isW3CRangeSupport){d=document.getSelection();if(!d||0===d.rangeCount||e.isBody(d.anchorNode))return null;f=d.getRangeAt(0);d=f.startContainer;c=f.startOffset;k=f.endContainer;
f=f.endOffset}else c=document.selection.createRange(),d=c.duplicate(),d.collapse(!1),c.collapse(!0),c=a(c,!0),f=a(d,!1),e.isText(c.node)&&e.isLeftEdgePoint(c)&&e.isTextNode(f.node)&&e.isRightEdgePoint(f)&&f.node.nextSibling===c.node&&(c=f),d=c.cont,c=c.offset,k=f.cont,f=f.offset;return new b(d,c,k,f)},createFromNode:function(a){var b=a,d=0,f=e.nodeLength(a);e.isVoid(b)&&(d=e.listPrev(b).length-1,b=b.parentNode);e.isBR(a)?(f=e.listPrev(a).length-1,a=a.parentNode):e.isVoid(a)&&(f=e.listPrev(a).length,
a=a.parentNode);return this.create(b,d,a,f)},createFromNodeBefore:function(a){return this.createFromNode(a).collapse(!0)},createFromNodeAfter:function(a){return this.createFromNode(a).collapse()},createFromBookmark:function(a,c){var d=e.fromOffsetPath(a,c.s.path),f=c.s.offset,m=e.fromOffsetPath(a,c.e.path);return new b(d,f,m,c.e.offset)},createFromParaBookmark:function(a,c){var d=a.s.offset,f=a.e.offset,m=e.fromOffsetPath(l.head(c),a.s.path),n=e.fromOffsetPath(l.last(c),a.e.path);return new b(m,d,
n,f)}}}(),N=function(){return{readFileAsDataURL:function(a){return h.Deferred(function(d){h.extend(new FileReader,{onload:function(a){d.resolve(a.target.result)},onerror:function(){d.reject(this)}}).readAsDataURL(a)}).promise()},createImage:function(a){return h.Deferred(function(d){var b=h("<img>");b.one("load",function(){b.off("error abort");d.resolve(b)}).one("error abort",function(){b.off("load").detach();d.reject(b)}).css({display:"none"}).appendTo(document.body).attr("src",a)}).promise()}}}(),
ja=function(a){var d=[],b=-1,g=a[0],c=function(){var b=q.create(g),c={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:a.html(),bookmark:b?b.bookmark(g):c}},k=function(b){null!==b.contents&&a.html(b.contents);null!==b.bookmark&&q.createFromBookmark(g,b.bookmark).select()};this.rewind=function(){a.html()!==d[b].contents&&this.recordUndo();b=0;k(d[b])};this.reset=function(){d=[];b=-1;a.html("");this.recordUndo()};this.undo=function(){a.html()!==d[b].contents&&this.recordUndo();0<b&&(b--,k(d[b]))};
this.redo=function(){d.length-1>b&&(b++,k(d[b]))};this.recordUndo=function(){b++;d.length>b&&(d=d.slice(0,b));d.push(c())}},ka=function(){var a=function(a,b){if(1.9>t.jqueryVersion){var g={};h.each(b,function(b,k){g[k]=a.css(k)});return g}return a.css.call(a,b)};this.fromNode=function(d){d=a(d,["font-family","font-size","text-align","list-style-type","line-height"])||{};d["font-size"]=parseInt(d["font-size"],10);return d};this.stylePara=function(a,b){h.each(a.nodes(e.isPara,{includeAncestor:!0}),
function(a,c){h(c).css(b)})};this.styleNodes=function(a,b){a=a.splitText();var g=b&&b.nodeName||"SPAN",c=!(!b||!b.expandClosestSibling),k=!(!b||!b.onlyPartialContains);if(a.isCollapsed())return[a.insertNode(e.create(g))];var f=e.makePredByNodeName(g),m=a.nodes(e.isText,{fullyContains:!0}).map(function(a){return e.singleChildAncestor(a,f)||e.wrap(a,g)});if(c){if(k)var n=a.nodes(),f=p.and(f,function(a){return l.contains(n,a)});return m.map(function(a){a=e.withClosestSiblings(a,f);var b=l.head(a),c=
l.tail(a);h.each(c,function(a,c){e.appendChildNodes(b,c.childNodes);e.remove(c)});return l.head(a)})}return m};this.current=function(a){var b=h(e.isElement(a.sc)?a.sc:a.sc.parentNode),b=this.fromNode(b);try{b=h.extend(b,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal",
"font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal"})}catch(c){}if(a.isOnList()){var g=-1<h.inArray(b["list-style-type"],["circle","disc","disc-leading-zero","square"]);b["list-style"]=g?"unordered":"ordered"}else b["list-style"]="none";(g=e.ancestor(a.sc,e.isPara))&&g.style["line-height"]?b["line-height"]=g.style.lineHeight:(g=parseInt(b["line-height"],10)/parseInt(b["font-size"],
10),b["line-height"]=g.toFixed(1));b.anchor=a.isOnAnchor()&&e.ancestor(a.sc,e.isAnchor);b.ancestors=e.listAncestor(a.sc,e.isEditable);b.range=a;return b}},O=function(){var a=this;this.insertOrderedList=function(a){this.toggleList("OL",a)};this.insertUnorderedList=function(a){this.toggleList("UL",a)};this.indent=function(a){var b=this;a=q.create(a).wrapBodyInlineWithPara();var g=a.nodes(e.isPara,{includeAncestor:!0}),g=l.clusterBy(g,p.peq2("parentNode"));h.each(g,function(a,d){var f=l.head(d);e.isLi(f)?
b.wrapList(d,f.parentNode.nodeName):h.each(d,function(a,b){h(b).css("marginLeft",function(a,b){return(parseInt(b,10)||0)+25})})});a.select()};this.outdent=function(a){var b=this;a=q.create(a).wrapBodyInlineWithPara();var g=a.nodes(e.isPara,{includeAncestor:!0}),g=l.clusterBy(g,p.peq2("parentNode"));h.each(g,function(a,d){var f=l.head(d);e.isLi(f)?b.releaseList([d]):h.each(d,function(a,b){h(b).css("marginLeft",function(a,b){b=parseInt(b,10)||0;return 25<b?b-25:""})})});a.select()};this.toggleList=
function(d,b){var g=q.create(b).wrapBodyInlineWithPara(),c=g.nodes(e.isPara,{includeAncestor:!0}),k=g.paraBookmark(c),f=l.clusterBy(c,p.peq2("parentNode"));if(l.find(c,e.isPurePara)){var m=[];h.each(f,function(b,c){m=m.concat(a.wrapList(c,d))});c=m}else g=g.nodes(e.isList,{includeAncestor:!0}).filter(function(a){return!h.nodeName(a,d)}),g.length?h.each(g,function(a,b){e.replace(b,d)}):c=this.releaseList(f,!0);q.createFromParaBookmark(k,c).select()};this.wrapList=function(a,b){var g=l.head(a),c=l.last(a),
k=e.isList(g.previousSibling)&&g.previousSibling,g=e.isList(c.nextSibling)&&c.nextSibling,c=k||e.insertAfter(e.create(b||"UL"),c);a=a.map(function(a){return e.isPurePara(a)?e.replace(a,"LI"):a});e.appendChildNodes(c,a);g&&(e.appendChildNodes(c,l.from(g.childNodes)),e.remove(g));return a};this.releaseList=function(a,b){var g=[];h.each(a,function(a,d){var f=l.head(d),m=l.last(d),n=b?e.lastAncestor(f,e.isList):f.parentNode,m=1<n.childNodes.length?e.splitTree(n,{node:m.parentNode,offset:e.position(m)+
1},{isSkipPaddingBlankHTML:!0}):null,f=e.splitTree(n,{node:f.parentNode,offset:e.position(f)},{isSkipPaddingBlankHTML:!0});d=b?e.listDescendant(f,e.isLi):l.from(f.childNodes).filter(e.isLi);if(b||!e.isList(n.parentNode))d=d.map(function(a){return e.replace(a,"P")});h.each(l.from(d).reverse(),function(a,b){e.insertAfter(b,n)});f=l.compact([n,f,m]);h.each(f,function(a,b){var c=[b].concat(e.listDescendant(b,e.isList));h.each(c.reverse(),function(a,b){e.nodeLength(b)||e.remove(b,!0)})});g=g.concat(d)});
return g}},la=function(){var a=new O;this.insertTab=function(a,b){var g=e.createText(Array(b+1).join(e.NBSP_CHAR));a=a.deleteContents();a.insertNode(g,!0);a=q.create(g,b);a.select()};this.insertParagraph=function(d){var b=q.create(d),b=b.deleteContents(),b=b.wrapBodyInlineWithPara(),g=e.ancestor(b.sc,e.isPara),c;if(g){if(e.isEmpty(g)&&e.isLi(g)){a.toggleList(g.parentNode.nodeName);return}e.isEmpty(g)&&e.isPara(g)&&e.isBlockquote(g.parentNode)?(e.insertAfter(g,g.parentNode),c=g):(c=e.splitTree(g,b.getStartPoint()),
b=e.listDescendant(g,e.isEmptyAnchor),b=b.concat(e.listDescendant(c,e.isEmptyAnchor)),h.each(b,function(a,b){e.remove(b)}),(e.isHeading(c)||e.isPre(c))&&e.isEmpty(c)&&(c=e.replace(c,"p")))}else g=b.sc.childNodes[b.so],c=h(e.emptyPara)[0],g?b.sc.insertBefore(c,g):b.sc.appendChild(c);q.create(c,0).normalize().select().scrollIntoView(d)}},ma=function(){this.tab=function(a,d){var b=e.ancestor(a.commonAncestor(),e.isCell),g=e.ancestor(b,e.isTable),g=e.listDescendant(g,e.isCell);(b=l[d?"prev":"next"](g,
b))&&q.create(b,0).select()};this.createTable=function(a,d,b){for(var g=[],c=0;c<a;c++)g.push("<td>"+e.blank+"</td>");a=g.join("");g=[];for(c=0;c<d;c++)g.push("<tr>"+a+"</tr>");d=g.join("");d=h("<table>"+d+"</table>");b&&b.tableClassName&&d.addClass(b.tableClassName);return d[0]}},H;t.hasCodeMirror&&(t.isSupportAmd?require(["codemirror"],function(a){H=a}):H=window.CodeMirror);h.summernote=h.extend(h.summernote,{version:"0.8.1",ui:z,plugins:{},options:{modules:{editor:function(a){var d=this,b=a.layoutInfo.note,
g=a.layoutInfo.editor,c=a.layoutInfo.editable,k=a.options,f=k.langInfo,m=c[0],n=null,w=new ka,K=new ma,L=new la,p=new O,E=new ja(c);this.initialize=function(){c.on("keydown",function(b){b.keyCode===v.code.ENTER&&a.triggerEvent("enter",b);a.triggerEvent("keydown",b);k.shortcuts&&!b.isDefaultPrevented()&&d.handleKeyMap(b)}).on("keyup",function(b){a.triggerEvent("keyup",b)}).on("focus",function(b){a.triggerEvent("focus",b)}).on("blur",function(b){a.triggerEvent("blur",b)}).on("mousedown",function(b){a.triggerEvent("mousedown",
b)}).on("mouseup",function(b){a.triggerEvent("mouseup",b)}).on("scroll",function(b){a.triggerEvent("scroll",b)}).on("paste",function(b){a.triggerEvent("paste",b)});c.html(e.html(b)||e.emptyPara);c.on(t.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input",function(){a.triggerEvent("change",c.html())});g.on("focusin",function(b){a.triggerEvent("focusin",b)}).on("focusout",function(b){a.triggerEvent("focusout",b)});!k.airMode&&k.height&&this.setHeight(k.height);!k.airMode&&k.maxHeight&&
c.css("max-height",k.maxHeight);!k.airMode&&k.minHeight&&c.css("min-height",k.minHeight);E.recordUndo()};this.destroy=function(){c.off()};this.handleKeyMap=function(b){var c=k.keyMap[t.isMac?"mac":"pc"],f=[];b.metaKey&&f.push("CMD");b.ctrlKey&&!b.altKey&&f.push("CTRL");b.shiftKey&&f.push("SHIFT");var d=v.nameFromCode[b.keyCode];d&&f.push(d);(c=c[f.join("+")])?(b.preventDefault(),a.invoke(c)):v.isEdit(b.keyCode)&&this.afterCommand()};this.createRange=function(){this.focus();return q.create(m)};this.saveRange=
function(a){n=this.createRange();a&&n.collapse().select()};this.restoreRange=function(){n&&(n.select(),this.focus())};this.saveTarget=function(a){c.data("target",a)};this.clearTarget=function(){c.removeData("target")};this.restoreTarget=function(){return c.data("target")};this.currentStyle=function(){var a=q.create();a&&(a=a.normalize());return a?w.current(a):w.fromNode(c)};this.styleFromNode=function(a){return w.fromNode(a)};this.undo=function(){a.triggerEvent("before.command",c.html());E.undo();
a.triggerEvent("change",c.html())};a.memo("help.undo",f.help.undo);this.redo=function(){a.triggerEvent("before.command",c.html());E.redo();a.triggerEvent("change",c.html())};a.memo("help.redo",f.help.redo);for(var C=this.beforeCommand=function(){a.triggerEvent("before.command",c.html());d.focus()},F=this.afterCommand=function(b){E.recordUndo();b||a.triggerEvent("change",c.html())},r="bold italic underline strikethrough superscript subscript justifyLeft justifyCenter justifyRight justifyFull formatBlock removeFormat backColor foreColor fontName".split(" "),
u=0,x=r.length;u<x;u++)this[r[u]]=function(a){return function(b){C();document.execCommand(a,!1,b);F(!0)}}(r[u]),a.memo("help."+r[u],f.help[r[u]]);this.tab=function(){var a=this.createRange();a.isCollapsed()&&a.isOnCell()?K.tab(a):(C(),L.insertTab(a,k.tabSize),F())};a.memo("help.tab",f.help.tab);this.untab=function(){var a=this.createRange();a.isCollapsed()&&a.isOnCell()&&K.tab(a,!0)};a.memo("help.untab",f.help.untab);this.wrapCommand=function(a){return function(){C();a.apply(d,arguments);F()}};this.insertParagraph=
this.wrapCommand(function(){L.insertParagraph(m)});a.memo("help.insertParagraph",f.help.insertParagraph);this.insertOrderedList=this.wrapCommand(function(){p.insertOrderedList(m)});a.memo("help.insertOrderedList",f.help.insertOrderedList);this.insertUnorderedList=this.wrapCommand(function(){p.insertUnorderedList(m)});a.memo("help.insertUnorderedList",f.help.insertUnorderedList);this.indent=this.wrapCommand(function(){p.indent(m)});a.memo("help.indent",f.help.indent);this.outdent=this.wrapCommand(function(){p.outdent(m)});
a.memo("help.outdent",f.help.outdent);this.insertImage=function(b,f){return N.createImage(b,f).then(function(a){C();"function"===typeof f?f(a):("string"===typeof f&&a.attr("data-filename",f),a.css("width",Math.min(c.width(),a.width())));a.show();q.create(m).insertNode(a[0]);q.createFromNodeAfter(a[0]).select();F()}).fail(function(b){a.triggerEvent("image.upload.error",b)})};this.insertImages=function(b){h.each(b,function(b,c){var g=c.name;k.maximumImageFileSize&&k.maximumImageFileSize<c.size?a.triggerEvent("image.upload.error",
f.image.maximumFileSizeError):N.readFileAsDataURL(c).then(function(a){return d.insertImage(a,g)}).fail(function(){a.triggerEvent("image.upload.error")})})};this.insertImagesOrCallback=function(b){k.callbacks.onImageUpload?a.triggerEvent("image.upload",b):this.insertImages(b)};this.insertNode=this.wrapCommand(function(a){this.createRange().insertNode(a);q.createFromNodeAfter(a).select()});this.insertText=this.wrapCommand(function(a){a=this.createRange().insertNode(e.createText(a));q.create(a,e.nodeLength(a)).select()});
this.getSelectedText=function(){var a=this.createRange();a.isOnAnchor()&&(a=q.createFromNode(e.ancestor(a.sc,e.isAnchor)));return a.toString()};this.pasteHTML=this.wrapCommand(function(a){a=this.createRange().pasteHTML(a);q.createFromNodeAfter(l.last(a)).select()});this.formatBlock=this.wrapCommand(function(a){a=t.isMSIE?"<"+a+">":a;document.execCommand("FormatBlock",!1,a)});this.formatPara=function(){this.formatBlock("P")};a.memo("help.formatPara",f.help.formatPara);for(u=1;6>=u;u++)this["formatH"+
u]=function(a){return function(){this.formatBlock("H"+a)}}(u),a.memo("help.formatH"+u,f.help["formatH"+u]);this.fontSize=function(a){var b=this.createRange();if(b&&b.isCollapsed()){var b=w.styleNodes(b),f=l.head(b);h(b).css({"font-size":a+"px"});f&&!e.nodeLength(f)&&(f.innerHTML=e.ZERO_WIDTH_NBSP_CHAR,q.createFromNodeAfter(f.firstChild).select(),c.data("bogus",f))}else C(),h(w.styleNodes(b)).css({"font-size":a+"px"}),F()};this.insertHorizontalRule=this.wrapCommand(function(){var a=this.createRange().insertNode(e.create("HR"));
a.nextSibling&&q.create(a.nextSibling,0).normalize().select()});a.memo("help.insertHorizontalRule",f.help.insertHorizontalRule);this.removeBogus=function(){var a=c.data("bogus");if(a){var b=l.find(l.from(a.childNodes),e.isText),f=b.nodeValue.indexOf(e.ZERO_WIDTH_NBSP_CHAR);-1!==f&&b.deleteData(f,1);e.isEmpty(a)&&e.remove(a);c.removeData("bogus")}};this.lineHeight=this.wrapCommand(function(a){w.stylePara(this.createRange(),{lineHeight:a})});this.unlink=function(){var a=this.createRange();a.isOnAnchor()&&
(a=e.ancestor(a.sc,e.isAnchor),a=q.createFromNode(a),a.select(),C(),document.execCommand("unlink"),F())};this.createLink=this.wrapCommand(function(a){var b=a.url,c=a.text,f=a.isNewWindow,d=a.range||this.createRange(),g=d.toString()!==c;k.onCreateLink&&(b=k.onCreateLink(b));a=[];g?(d=d.deleteContents(),c=d.insertNode(h("<A>"+c+"</A>")[0]),a.push(c)):a=w.styleNodes(d,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});h.each(a,function(a,c){h(c).attr("href",b);f?h(c).attr("target","_blank"):
h(c).removeAttr("target")});c=q.createFromNodeBefore(l.head(a)).getStartPoint();a=q.createFromNodeAfter(l.last(a)).getEndPoint();q.create(c.node,c.offset,a.node,a.offset).select()});this.getLinkInfo=function(){var a=this.createRange().expand(e.isAnchor),b=h(l.head(a.nodes(e.isAnchor)));return{range:a,text:a.toString(),isNewWindow:b.length?"_blank"===b.attr("target"):!1,url:b.length?b.attr("href"):""}};this.color=this.wrapCommand(function(a){var b=a.foreColor;a=a.backColor;b&&document.execCommand("foreColor",
!1,b);a&&document.execCommand("backColor",!1,a)});this.insertTable=this.wrapCommand(function(a){a=a.split("x");this.createRange().deleteContents().insertNode(K.createTable(a[0],a[1],k))});this.floatMe=this.wrapCommand(function(a){h(this.restoreTarget()).css("float",a)});this.resize=this.wrapCommand(function(a){h(this.restoreTarget()).css({width:100*a+"%",height:""})});this.resizeTo=function(a,b,c){if(c){c=a.y/a.x;var f=b.data("ratio");a={width:f>c?a.x:a.y/f,height:f>c?a.x*f:a.y}}else a={width:a.x,
height:a.y};b.css(a)};this.removeMedia=this.wrapCommand(function(){var b=h(this.restoreTarget()).detach();a.triggerEvent("media.delete",b,c)});this.hasFocus=function(){return c.is(":focus")};this.focus=function(){this.hasFocus()||c.focus()};this.isEmpty=function(){return e.isEmpty(c[0])||e.emptyPara===c.html()};this.empty=function(){a.invoke("code",e.emptyPara)};this.setHeight=function(a){c.outerHeight(a)}},clipboard:function(a){var d=this,b=a.layoutInfo.editable;this.events={"summernote.keydown":function(b,
c){d.needKeydownHook()&&(c.ctrlKey||c.metaKey)&&c.keyCode===v.code.V&&(a.invoke("editor.saveRange"),d.$paste.focus(),setTimeout(function(){d.pasteByHook()},0))}};this.needKeydownHook=function(){return t.isMSIE&&10<t.browserVersion||t.isFF};this.initialize=function(){if(this.needKeydownHook())this.$paste=h("<div />").attr("contenteditable",!0).css({position:"absolute",left:-1E5,opacity:0}),b.before(this.$paste),this.$paste.on("paste",function(b){a.triggerEvent("paste",b)});else b.on("paste",this.pasteByEvent)};
this.destroy=function(){this.needKeydownHook()&&(this.$paste.remove(),this.$paste=null)};this.pasteByHook=function(){var b=this.$paste[0].firstChild;if(e.isImg(b)){for(var b=atob(b.src.split(",")[1]),c=new Uint8Array(b.length),d=0;d<b.length;d++)c[d]=b.charCodeAt(d);b=new Blob([c],{type:"image/png"});b.name="clipboard.png";a.invoke("editor.restoreRange");a.invoke("editor.focus");a.invoke("editor.insertImagesOrCallback",[b])}else b=h("<div />").html(this.$paste.html()).html(),a.invoke("editor.restoreRange"),
a.invoke("editor.focus"),b&&a.invoke("editor.pasteHTML",b);this.$paste.empty()};this.pasteByEvent=function(b){(b=b.originalEvent.clipboardData)&&b.items&&b.items.length&&(b=l.head(b.items),"file"===b.kind&&-1!==b.type.indexOf("image/")&&a.invoke("editor.insertImagesOrCallback",[b.getAsFile()]),a.invoke("editor.afterCommand"))}},dropzone:function(a){var d=h(document),b=a.layoutInfo.editor,g=a.layoutInfo.editable,c=a.options,e=c.langInfo,f=h('<div class="note-dropzone">  <div class="note-dropzone-message"/></div>').prependTo(b);
this.initialize=function(){if(c.disableDragAndDrop)d.on("drop",function(a){a.preventDefault()});else this.attachDragAndDropEvent()};this.attachDragAndDropEvent=function(){var c=h(),n=f.find(".note-dropzone-message");d.on("dragenter",function(d){var g=a.invoke("codeview.isActivated"),h=0<b.width()&&0<b.height();g||c.length||!h||(b.addClass("dragover"),f.width(b.width()),f.height(b.height()),n.text(e.image.dragImageHere));c=c.add(d.target)}).on("dragleave",function(a){c=c.not(a.target);c.length||b.removeClass("dragover")}).on("drop",
function(){c=h();b.removeClass("dragover")});f.on("dragenter",function(){f.addClass("hover");n.text(e.image.dropImage)}).on("dragleave",function(){f.removeClass("hover");n.text(e.image.dragImageHere)});f.on("drop",function(b){var c=b.originalEvent.dataTransfer;c&&c.files&&c.files.length?(b.preventDefault(),g.focus(),a.invoke("editor.insertImagesOrCallback",c.files)):h.each(c.types,function(b,f){var d=c.getData(f);-1<f.toLowerCase().indexOf("text")?a.invoke("editor.pasteHTML",d):h(d).each(function(){a.invoke("editor.insertNode",
this)})})}).on("dragover",!1)}},codeview:function(a){var d=a.layoutInfo.editor,b=a.layoutInfo.editable,g=a.layoutInfo.codable,c=a.options;this.sync=function(){this.isActivated()&&t.hasCodeMirror&&g.data("cmEditor").save()};this.isActivated=function(){return d.hasClass("codeview")};this.toggle=function(){this.isActivated()?this.deactivate():this.activate();a.triggerEvent("codeview.toggled")};this.activate=function(){g.val(e.html(b,c.prettifyHtml));g.height(b.height());a.invoke("toolbar.updateCodeview",
!0);d.addClass("codeview");g.focus();if(t.hasCodeMirror){var k=H.fromTextArea(g[0],c.codemirror);if(c.codemirror.tern){var f=new H.TernServer(c.codemirror.tern);k.ternServer=f;k.on("cursorActivity",function(a){f.updateArgHints(a)})}k.setSize(null,b.outerHeight());g.data("cmEditor",k)}};this.deactivate=function(){if(t.hasCodeMirror){var k=g.data("cmEditor");g.val(k.getValue());k.toTextArea()}var k=e.value(g,c.prettifyHtml)||e.emptyPara,f=b.html()!==k;b.html(k);b.height(c.height?g.height():"auto");
d.removeClass("codeview");f&&a.triggerEvent("change",b.html(),b);b.focus();a.invoke("toolbar.updateCodeview",!1)};this.destroy=function(){this.isActivated()&&this.deactivate()}},statusbar:function(a){var d=h(document),b=a.layoutInfo.statusbar,g=a.layoutInfo.editable,c=a.options;this.initialize=function(){if(!c.airMode&&!c.disableResizeEditor)b.on("mousedown",function(a){a.preventDefault();a.stopPropagation();var b=g.offset().top-d.scrollTop();d.on("mousemove",function(a){a=a.clientY-(b+24);a=0<c.minheight?
Math.max(a,c.minheight):a;a=0<c.maxHeight?Math.min(a,c.maxHeight):a;g.height(a)}).one("mouseup",function(){d.off("mousemove")})})};this.destroy=function(){b.off()}},fullscreen:function(a){var d=a.layoutInfo.editor,b=a.layoutInfo.toolbar,g=a.layoutInfo.editable,c=a.layoutInfo.codable,e=h(window),f=h("html, body");this.toggle=function(){var h=function(a){g.css("height",a.h);c.css("height",a.h);c.data("cmeditor")&&c.data("cmeditor").setsize(null,a.h)};d.toggleClass("fullscreen");this.isFullscreen()?
(g.data("orgHeight",g.css("height")),e.on("resize",function(){h({h:e.height()-b.outerHeight()})}).trigger("resize"),f.css("overflow","hidden")):(e.off("resize"),h({h:g.data("orgHeight")}),f.css("overflow","visible"));a.invoke("toolbar.updateFullscreen",this.isFullscreen())};this.isFullscreen=function(){return d.hasClass("fullscreen")}},handle:function(a){var d=this,b=h(document),g=a.layoutInfo.editingArea,c=a.options;this.events={"summernote.mousedown":function(a,b){d.update(b.target)&&b.preventDefault()},
"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){d.update()}};this.initialize=function(){this.$handle=h(['<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="',c.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',
c.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div></div>"].join("")).prependTo(g);this.$handle.on("mousedown",function(c){if(e.isControlSizing(c.target)){c.preventDefault();c.stopPropagation();var f=d.$handle.find(".note-control-selection").data("target"),g=f.offset(),n=b.scrollTop();b.on("mousemove",function(b){a.invoke("editor.resizeTo",{x:b.clientX-g.left,y:b.clientY-(g.top-n)},f,!b.shiftKey);d.update(f[0])}).one("mouseup",function(c){c.preventDefault();b.off("mousemove");
a.invoke("editor.afterCommand")});f.data("ratio")||f.data("ratio",f.height()/f.width())}})};this.destroy=function(){this.$handle.remove()};this.update=function(b){var c=e.isImg(b),d=this.$handle.find(".note-control-selection");a.invoke("imagePopover.update",b);if(c){var g=h(b),w=g.position(),l=g.outerWidth(!0),p=g.outerHeight(!0);d.css({display:"block",left:w.left,top:w.top,width:l,height:p}).data("target",g);g=l+"x"+p;d.find(".note-control-selection-info").text(g);a.invoke("editor.saveTarget",b)}else this.hide();
return c};this.hide=function(){a.invoke("editor.clearTarget");this.$handle.children().hide()}},hintPopover:function(a){var d=this,b=h.summernote.ui,g=a.options.hint||[],c=a.options.hintDirection||"bottom",k=h.isArray(g)?g:[g];this.events={"summernote.keyup":function(a,b){b.isDefaultPrevented()||d.handleKeyup(b)},"summernote.keydown":function(a,b){d.handleKeydown(b)},"summernote.dialog.shown":function(){d.hide()}};this.shouldInitialize=function(){return 0<k.length};this.initialize=function(){this.lastWordRange=
null;this.$popover=b.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo("body");this.$popover.hide();this.$content=this.$popover.find(".popover-content");this.$content.on("click",".note-hint-item",function(){d.$content.find(".active").removeClass("active");h(this).addClass("active");d.replace()})};this.destroy=function(){this.$popover.remove()};this.selectItem=function(a){this.$content.find(".active").removeClass("active");a.addClass("active");this.$content[0].scrollTop=
a[0].offsetTop-this.$content.innerHeight()/2};this.moveDown=function(){var a=this.$content.find(".note-hint-item.active"),b=a.next();b.length?this.selectItem(b):(a=a.parent().next(),a.length||(a=this.$content.find(".note-hint-group").first()),this.selectItem(a.find(".note-hint-item").first()))};this.moveUp=function(){var a=this.$content.find(".note-hint-item.active"),b=a.prev();b.length?this.selectItem(b):(a=a.parent().prev(),a.length||(a=this.$content.find(".note-hint-group").last()),this.selectItem(a.find(".note-hint-item").last()))};
this.replace=function(){var b=this.$content.find(".note-hint-item.active");b.length&&(b=this.nodeFromItem(b),this.lastWordRange.insertNode(b),q.createFromNode(b).collapse().select(),this.lastWordRange=null,this.hide(),a.invoke("editor.focus"))};this.nodeFromItem=function(a){var b=k[a.data("index")];a=a.data("item");b=b.content?b.content(a):a;"string"===typeof b&&(b=e.createText(b));return b};this.createItemTemplates=function(a,b){var c=k[a];return b.map(function(b,d){var g=h('<div class="note-hint-item"/>');
g.append(c.template?c.template(b):b+"");g.data({index:a,item:b});0===a&&0===d&&g.addClass("active");return g})};this.handleKeydown=function(a){this.$popover.is(":visible")&&(a.keyCode===v.code.ENTER?(a.preventDefault(),this.replace()):a.keyCode===v.code.UP?(a.preventDefault(),this.moveUp()):a.keyCode===v.code.DOWN&&(a.preventDefault(),this.moveDown()))};this.searchKeyword=function(a,b,c){(a=k[a])&&a.match.test(b)&&a.search?(b=a.match.exec(b),a.search(b[1],c)):c()};this.createGroup=function(a,b){var c=
h('<div class="note-hint-group note-hint-group-'+a+'"/>');this.searchKeyword(a,b,function(b){b=b||[];b.length&&(c.html(d.createItemTemplates(a,b)),d.show())});return c};this.handleKeyup=function(b){if(l.contains([v.code.ENTER,v.code.UP,v.code.DOWN],b.keyCode))b.keyCode===v.code.ENTER&&this.$popover.is(":visible");else{b=a.invoke("editor.createRange").getWordRange();var g=b.toString();if(k.length&&g){this.$content.empty();var e=p.rect2bnd(l.last(b.getClientRects()));e&&(this.$popover.hide(),this.lastWordRange=
b,k.forEach(function(a,b){a.match.test(g)&&d.createGroup(b,g).appendTo(d.$content)}),"top"===c?this.$popover.css({left:e.left,top:e.top-this.$popover.outerHeight()-5}):this.$popover.css({left:e.left,top:e.top+e.height+5}))}else this.hide()}};this.show=function(){this.$popover.show()};this.hide=function(){this.$popover.hide()}},autoLink:function(a){var d=this,b=/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;this.events={"summernote.keyup":function(a,b){b.isDefaultPrevented()||
d.handleKeyup(b)},"summernote.keydown":function(a,b){d.handleKeydown(b)}};this.initialize=function(){this.lastWordRange=null};this.destroy=function(){this.lastWordRange=null};this.replace=function(){if(this.lastWordRange){var d=this.lastWordRange.toString(),c=d.match(b);c&&(c[1]||c[2])&&(c=c[1]?d:"http://"+d,d=h("<a />").html(d).attr("href",c)[0],this.lastWordRange.insertNode(d),this.lastWordRange=null,a.invoke("editor.focus"))}};this.handleKeydown=function(b){l.contains([v.code.ENTER,v.code.SPACE],
b.keyCode)&&(this.lastWordRange=a.invoke("editor.createRange").getWordRange())};this.handleKeyup=function(a){l.contains([v.code.ENTER,v.code.SPACE],a.keyCode)&&this.replace()}},autoSync:function(a){var d=a.layoutInfo.note;this.events={"summernote.change":function(){d.val(a.invoke("code"))}};this.shouldInitialize=function(){return e.isTextarea(d[0])}},placeholder:function(a){var d=this,b=a.layoutInfo.editingArea,g=a.options;this.events={"summernote.init summernote.change":function(){d.update()},"summernote.codeview.toggled":function(){d.update()}};
this.shouldInitialize=function(){return!!g.placeholder};this.initialize=function(){this.$placeholder=h('<div class="note-placeholder">');this.$placeholder.on("click",function(){a.invoke("focus")}).text(g.placeholder).prependTo(b)};this.destroy=function(){this.$placeholder.remove()};this.update=function(){var b=!a.invoke("codeview.isActivated")&&a.invoke("editor.isEmpty");this.$placeholder.toggle(b)}},buttons:function(a){var d=this,b=h.summernote.ui,g=a.layoutInfo.toolbar,c=a.options,e=c.langInfo,
f=p.invertObject(c.keyMap[t.isMac?"mac":"pc"]),m=this.representShortcut=function(a){a=f[a];t.isMac&&(a=a.replace("CMD","\u2318").replace("SHIFT","\u21e7"));a=a.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]");return" ("+a+")"};this.initialize=function(){this.addToolbarButtons();this.addImagePopoverButtons();this.addLinkPopoverButtons();this.fontInstalledMap={}};this.destroy=function(){delete this.fontInstalledMap};this.isFontInstalled=function(a){d.fontInstalledMap.hasOwnProperty(a)||
(d.fontInstalledMap[a]=t.isFontInstalled(a)||l.contains(c.fontNamesIgnoreCheck,a));return d.fontInstalledMap[a]};this.addToolbarButtons=function(){a.memo("button.style",function(){return b.buttonGroup([b.button({className:"dropdown-toggle",contents:b.icon(c.icons.magic)+" "+b.icon(c.icons.caret,"span"),tooltip:e.style.style,data:{toggle:"dropdown"}}),b.dropdown({className:"dropdown-style",items:a.options.styleTags,template:function(a){"string"===typeof a&&(a={tag:a,title:a});var b=a.tag;return"<"+
b+(a.style?' style="'+a.style+'" ':"")+(a.className?' className="'+a.className+'"':"")+">"+a.title+"</"+b+">"},click:a.createInvokeHandler("editor.formatBlock")})]).render()});a.memo("button.bold",function(){return b.button({className:"note-btn-bold",contents:b.icon(c.icons.bold),tooltip:e.font.bold+m("bold"),click:a.createInvokeHandler("editor.bold")}).render()});a.memo("button.italic",function(){return b.button({className:"note-btn-italic",contents:b.icon(c.icons.italic),tooltip:e.font.italic+m("italic"),
click:a.createInvokeHandler("editor.italic")}).render()});a.memo("button.underline",function(){return b.button({className:"note-btn-underline",contents:b.icon(c.icons.underline),tooltip:e.font.underline+m("underline"),click:a.createInvokeHandler("editor.underline")}).render()});a.memo("button.clear",function(){return b.button({contents:b.icon(c.icons.eraser),tooltip:e.font.clear+m("removeFormat"),click:a.createInvokeHandler("editor.removeFormat")}).render()});a.memo("button.strikethrough",function(){return b.button({className:"note-btn-strikethrough",
contents:b.icon(c.icons.strikethrough),tooltip:e.font.strikethrough+m("strikethrough"),click:a.createInvokeHandler("editor.strikethrough")}).render()});a.memo("button.superscript",function(){return b.button({className:"note-btn-superscript",contents:b.icon(c.icons.superscript),tooltip:e.font.superscript,click:a.createInvokeHandler("editor.superscript")}).render()});a.memo("button.subscript",function(){return b.button({className:"note-btn-subscript",contents:b.icon(c.icons.subscript),tooltip:e.font.subscript,
click:a.createInvokeHandler("editor.subscript")}).render()});a.memo("button.fontname",function(){return b.buttonGroup([b.button({className:"dropdown-toggle",contents:'<span class="note-current-fontname"/> '+b.icon(c.icons.caret,"span"),tooltip:e.font.name,data:{toggle:"dropdown"}}),b.dropdownCheck({className:"dropdown-fontname",checkClassName:c.icons.menuCheck,items:c.fontNames.filter(d.isFontInstalled),template:function(a){return'<span style="font-family:'+a+'">'+a+"</span>"},click:a.createInvokeHandler("editor.fontName")})]).render()});
a.memo("button.fontsize",function(){return b.buttonGroup([b.button({className:"dropdown-toggle",contents:'<span class="note-current-fontsize"/>'+b.icon(c.icons.caret,"span"),tooltip:e.font.size,data:{toggle:"dropdown"}}),b.dropdownCheck({className:"dropdown-fontsize",checkClassName:c.icons.menuCheck,items:c.fontSizes,click:a.createInvokeHandler("editor.fontSize")})]).render()});a.memo("button.color",function(){return b.buttonGroup({className:"note-color",children:[b.button({className:"note-current-color-button",
contents:b.icon(c.icons.font+" note-recent-color"),tooltip:e.color.recent,click:function(b){b=h(b.currentTarget);a.invoke("editor.color",{backColor:b.attr("data-backColor"),foreColor:b.attr("data-foreColor")})},callback:function(a){a.find(".note-recent-color").css("background-color","#FFFF00");a.attr("data-backColor","#FFFF00")}}),b.button({className:"dropdown-toggle",contents:b.icon(c.icons.caret,"span"),tooltip:e.color.more,data:{toggle:"dropdown"}}),b.dropdown({items:['<li><div class="btn-group">',
'  <div class="note-palette-title">'+e.color.background+"</div>",'  <div>    <button type="button" class="note-color-reset btn btn-default" data-event="backColor" data-value="inherit">',e.color.transparent,'    </button>  </div>  <div class="note-holder" data-event="backColor"/></div><div class="btn-group">','  <div class="note-palette-title">'+e.color.foreground+"</div>",'  <div>    <button type="button" class="note-color-reset btn btn-default" data-event="removeFormat" data-value="foreColor">',
e.color.resetToDefault,'    </button>  </div>  <div class="note-holder" data-event="foreColor"/></div></li>'].join(""),callback:function(a){a.find(".note-holder").each(function(){var a=h(this);a.append(b.palette({colors:c.colors,eventName:a.data("event")}).render())})},click:function(b){var c=h(b.target);b=c.data("event");var d=c.data("value");if(b&&d){var f="backColor"===b?"background-color":"color",e=c.closest(".note-color").find(".note-recent-color"),c=c.closest(".note-color").find(".note-current-color-button");
e.css(f,d);c.attr("data-"+b,d);a.invoke("editor."+b,d)}}})]}).render()});a.memo("button.ul",function(){return b.button({contents:b.icon(c.icons.unorderedlist),tooltip:e.lists.unordered+m("insertUnorderedList"),click:a.createInvokeHandler("editor.insertUnorderedList")}).render()});a.memo("button.ol",function(){return b.button({contents:b.icon(c.icons.orderedlist),tooltip:e.lists.ordered+m("insertOrderedList"),click:a.createInvokeHandler("editor.insertOrderedList")}).render()});var f=b.button({contents:b.icon(c.icons.alignLeft),
tooltip:e.paragraph.left+m("justifyLeft"),click:a.createInvokeHandler("editor.justifyLeft")}),g=b.button({contents:b.icon(c.icons.alignCenter),tooltip:e.paragraph.center+m("justifyCenter"),click:a.createInvokeHandler("editor.justifyCenter")}),l=b.button({contents:b.icon(c.icons.alignRight),tooltip:e.paragraph.right+m("justifyRight"),click:a.createInvokeHandler("editor.justifyRight")}),q=b.button({contents:b.icon(c.icons.alignJustify),tooltip:e.paragraph.justify+m("justifyFull"),click:a.createInvokeHandler("editor.justifyFull")}),
r=b.button({contents:b.icon(c.icons.outdent),tooltip:e.paragraph.outdent+m("outdent"),click:a.createInvokeHandler("editor.outdent")}),t=b.button({contents:b.icon(c.icons.indent),tooltip:e.paragraph.indent+m("indent"),click:a.createInvokeHandler("editor.indent")});a.memo("button.justifyLeft",p.invoke(f,"render"));a.memo("button.justifyCenter",p.invoke(g,"render"));a.memo("button.justifyRight",p.invoke(l,"render"));a.memo("button.justifyFull",p.invoke(q,"render"));a.memo("button.outdent",p.invoke(r,
"render"));a.memo("button.indent",p.invoke(t,"render"));a.memo("button.paragraph",function(){return b.buttonGroup([b.button({className:"dropdown-toggle",contents:b.icon(c.icons.alignLeft)+" "+b.icon(c.icons.caret,"span"),tooltip:e.paragraph.paragraph,data:{toggle:"dropdown"}}),b.dropdown([b.buttonGroup({className:"note-align",children:[f,g,l,q]}),b.buttonGroup({className:"note-list",children:[r,t]})])]).render()});a.memo("button.height",function(){return b.buttonGroup([b.button({className:"dropdown-toggle",
contents:b.icon(c.icons.textHeight)+" "+b.icon(c.icons.caret,"span"),tooltip:e.font.height,data:{toggle:"dropdown"}}),b.dropdownCheck({items:c.lineHeights,checkClassName:c.icons.menuCheck,className:"dropdown-line-height",click:a.createInvokeHandler("editor.lineHeight")})]).render()});a.memo("button.table",function(){return b.buttonGroup([b.button({className:"dropdown-toggle",contents:b.icon(c.icons.table)+" "+b.icon(c.icons.caret,"span"),tooltip:e.table.table,data:{toggle:"dropdown"}}),b.dropdown({className:"note-table",
items:'<div class="note-dimension-picker">  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>  <div class="note-dimension-picker-highlighted"/>  <div class="note-dimension-picker-unhighlighted"/></div><div class="note-dimension-display">1 x 1</div>'})],{callback:function(b){b.find(".note-dimension-picker-mousecatcher").css({width:c.insertTableMaxSize.col+"em",height:c.insertTableMaxSize.row+"em"}).mousedown(a.createInvokeHandler("editor.insertTable")).on("mousemove",
d.tableMoveHandler)}}).render()});a.memo("button.link",function(){return b.button({contents:b.icon(c.icons.link),tooltip:e.link.link,click:a.createInvokeHandler("linkDialog.show")}).render()});a.memo("button.picture",function(){return b.button({contents:b.icon(c.icons.picture),tooltip:e.image.image,click:a.createInvokeHandler("imageDialog.show")}).render()});a.memo("button.video",function(){return b.button({contents:b.icon(c.icons.video),tooltip:e.video.video,click:a.createInvokeHandler("videoDialog.show")}).render()});
a.memo("button.hr",function(){return b.button({contents:b.icon(c.icons.minus),tooltip:e.hr.insert+m("insertHorizontalRule"),click:a.createInvokeHandler("editor.insertHorizontalRule")}).render()});a.memo("button.fullscreen",function(){return b.button({className:"btn-fullscreen",contents:b.icon(c.icons.arrowsAlt),tooltip:e.options.fullscreen,click:a.createInvokeHandler("fullscreen.toggle")}).render()});a.memo("button.codeview",function(){return b.button({className:"btn-codeview",contents:b.icon(c.icons.code),
tooltip:e.options.codeview,click:a.createInvokeHandler("codeview.toggle")}).render()});a.memo("button.redo",function(){return b.button({contents:b.icon(c.icons.redo),tooltip:e.history.redo+m("redo"),click:a.createInvokeHandler("editor.redo")}).render()});a.memo("button.undo",function(){return b.button({contents:b.icon(c.icons.undo),tooltip:e.history.undo+m("undo"),click:a.createInvokeHandler("editor.undo")}).render()});a.memo("button.help",function(){return b.button({contents:b.icon(c.icons.question),
tooltip:e.options.help,click:a.createInvokeHandler("helpDialog.show")}).render()})};this.addImagePopoverButtons=function(){a.memo("button.imageSize100",function(){return b.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:e.image.resizeFull,click:a.createInvokeHandler("editor.resize","1")}).render()});a.memo("button.imageSize50",function(){return b.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:e.image.resizeHalf,click:a.createInvokeHandler("editor.resize",
"0.5")}).render()});a.memo("button.imageSize25",function(){return b.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:e.image.resizeQuarter,click:a.createInvokeHandler("editor.resize","0.25")}).render()});a.memo("button.floatLeft",function(){return b.button({contents:b.icon(c.icons.alignLeft),tooltip:e.image.floatLeft,click:a.createInvokeHandler("editor.floatMe","left")}).render()});a.memo("button.floatRight",function(){return b.button({contents:b.icon(c.icons.alignRight),tooltip:e.image.floatRight,
click:a.createInvokeHandler("editor.floatMe","right")}).render()});a.memo("button.floatNone",function(){return b.button({contents:b.icon(c.icons.alignJustify),tooltip:e.image.floatNone,click:a.createInvokeHandler("editor.floatMe","none")}).render()});a.memo("button.removeMedia",function(){return b.button({contents:b.icon(c.icons.trash),tooltip:e.image.remove,click:a.createInvokeHandler("editor.removeMedia")}).render()})};this.addLinkPopoverButtons=function(){a.memo("button.linkDialogShow",function(){return b.button({contents:b.icon(c.icons.link),
tooltip:e.link.edit,click:a.createInvokeHandler("linkDialog.show")}).render()});a.memo("button.unlink",function(){return b.button({contents:b.icon(c.icons.unlink),tooltip:e.link.unlink,click:a.createInvokeHandler("editor.unlink")}).render()})};this.build=function(c,d){for(var f=0,e=d.length;f<e;f++){for(var g=d[f],h=g[1],g=b.buttonGroup({className:"note-"+g[0]}).render(),k=0,m=h.length;k<m;k++){var l=a.memo("button."+h[k]);l&&g.append("function"===typeof l?l(a):l)}g.appendTo(c)}};this.updateCurrentStyle=
function(){var b=a.invoke("editor.currentStyle");this.updateBtnStates({".note-btn-bold":function(){return"bold"===b["font-bold"]},".note-btn-italic":function(){return"italic"===b["font-italic"]},".note-btn-underline":function(){return"underline"===b["font-underline"]},".note-btn-subscript":function(){return"subscript"===b["font-subscript"]},".note-btn-superscript":function(){return"superscript"===b["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===b["font-strikethrough"]}});
if(b["font-family"]){var c=b["font-family"].split(",").map(function(a){return a.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),f=l.find(c,d.isFontInstalled);g.find(".dropdown-fontname li a").each(function(){this.className=h(this).data("value")+""===f+""?"checked":""});g.find(".note-current-fontname").text(f)}if(b["font-size"]){var e=b["font-size"];g.find(".dropdown-fontsize li a").each(function(){this.className=h(this).data("value")+""===e+""?"checked":""});g.find(".note-current-fontsize").text(e)}if(b["line-height"]){var k=
b["line-height"];g.find(".dropdown-line-height li a").each(function(){this.className=h(this).data("value")+""===k+""?"checked":""})}};this.updateBtnStates=function(a){h.each(a,function(a,c){b.toggleBtnActive(g.find(a),c())})};this.tableMoveHandler=function(a){var b,d=h(a.target.parentNode),f=d.next(),e=d.find(".note-dimension-picker-mousecatcher"),g=d.find(".note-dimension-picker-highlighted"),d=d.find(".note-dimension-picker-unhighlighted");if(void 0===a.offsetX){var k=h(a.target).offset();b=a.pageX-
k.left;a=a.pageY-k.top}else b=a.offsetX,a=a.offsetY;b=Math.ceil(b/18)||1;a=Math.ceil(a/18)||1;g.css({width:b+"em",height:a+"em"});e.data("value",b+"x"+a);3<b&&b<c.insertTableMaxSize.col&&d.css({width:b+1+"em"});3<a&&a<c.insertTableMaxSize.row&&d.css({height:a+1+"em"});f.html(b+" x "+a)}},toolbar:function(a){var d=h.summernote.ui,b=a.layoutInfo.note,e=a.layoutInfo.toolbar,c=a.options;this.shouldInitialize=function(){return!c.airMode};this.initialize=function(){c.toolbar=c.toolbar||[];c.toolbar.length?
a.invoke("buttons.build",e,c.toolbar):e.hide();c.toolbarContainer&&e.appendTo(c.toolbarContainer);b.on("summernote.keyup summernote.mouseup summernote.change",function(){a.invoke("buttons.updateCurrentStyle")});a.invoke("buttons.updateCurrentStyle")};this.destroy=function(){e.children().remove()};this.updateFullscreen=function(a){d.toggleBtnActive(e.find(".btn-fullscreen"),a)};this.updateCodeview=function(a){d.toggleBtnActive(e.find(".btn-codeview"),a);a?this.deactivate():this.activate()};this.activate=
function(a){var b=e.find("button");a||(b=b.not(".btn-codeview"));d.toggleBtn(b,!0)};this.deactivate=function(a){var b=e.find("button");a||(b=b.not(".btn-codeview"));d.toggleBtn(b,!1)}},linkDialog:function(a){var d=this,b=h.summernote.ui,e=a.layoutInfo.editor,c=a.options,k=c.langInfo;this.initialize=function(){var a=c.dialogsInBody?h(document.body):e;this.$dialog=b.dialog({className:"link-dialog",title:k.link.insert,fade:c.dialogsFade,body:'<div class="form-group"><label>'+k.link.textToDisplay+'</label><input class="note-link-text form-control" type="text" /></div><div class="form-group"><label>'+
k.link.url+'</label><input class="note-link-url form-control" type="text" value="http://" /></div>'+(c.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+k.link.openInNewWindow+"</label></div>"),footer:'<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+k.link.insert+"</button>"}).render().appendTo(a)};this.destroy=function(){b.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(a,b){a.on("keypress",function(a){a.keyCode===
v.code.ENTER&&b.trigger("click")})};this.showLinkDialog=function(c){return h.Deferred(function(e){var g=d.$dialog.find(".note-link-text"),h=d.$dialog.find(".note-link-url"),k=d.$dialog.find(".note-link-btn"),l=d.$dialog.find("input[type=checkbox]");b.onDialogShown(d.$dialog,function(){a.triggerEvent("dialog.shown");g.val(c.text);g.on("input",function(){b.toggleBtn(k,g.val()&&h.val());c.text=g.val()});c.url||(c.url=c.text||"http://",b.toggleBtn(k,c.text));h.on("input",function(){b.toggleBtn(k,g.val()&&
h.val());c.text||g.val(h.val())}).val(c.url).trigger("focus");d.bindEnterKey(h,k);d.bindEnterKey(g,k);l.prop("checked",c.isNewWindow);k.one("click",function(a){a.preventDefault();e.resolve({range:c.range,url:h.val(),text:g.val(),isNewWindow:l.is(":checked")});d.$dialog.modal("hide")})});b.onDialogHidden(d.$dialog,function(){g.off("input keypress");h.off("input keypress");k.off("click");"pending"===e.state()&&e.reject()});b.showDialog(d.$dialog)}).promise()};this.show=function(){var b=a.invoke("editor.getLinkInfo");
a.invoke("editor.saveRange");this.showLinkDialog(b).then(function(b){a.invoke("editor.restoreRange");a.invoke("editor.createLink",b)}).fail(function(){a.invoke("editor.restoreRange")})};a.memo("help.linkDialog.show",c.langInfo.help["linkDialog.show"])},linkPopover:function(a){var d=this,b=h.summernote.ui,g=a.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){d.update()},"summernote.dialog.shown":function(){d.hide()}};this.shouldInitialize=function(){return!l.isEmpty(g.popover.link)};
this.initialize=function(){this.$popover=b.popover({className:"note-link-popover",callback:function(a){a.find(".popover-content").prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo("body");var c=this.$popover.find(".popover-content");a.invoke("buttons.build",c,g.popover.link)};this.destroy=function(){this.$popover.remove()};this.update=function(){if(a.invoke("editor.hasFocus")){var b=a.invoke("editor.createRange");if(b.isCollapsed()&&b.isOnAnchor()){var b=e.ancestor(b.sc,e.isAnchor),
d=h(b).attr("href");this.$popover.find("a").attr("href",d).html(d);b=e.posFromPlaceholder(b);this.$popover.css({display:"block",left:b.left,top:b.top})}else this.hide()}else this.hide()};this.hide=function(){this.$popover.hide()}},imageDialog:function(a){var d=this,b=h.summernote.ui,e=a.layoutInfo.editor,c=a.options,k=c.langInfo;this.initialize=function(){var a=c.dialogsInBody?h(document.body):e,d="";c.maximumImageFileSize&&(d=Math.floor(Math.log(c.maximumImageFileSize)/Math.log(1024)),d=1*(c.maximumImageFileSize/
Math.pow(1024,d)).toFixed(2)+" "+" KMGTP"[d]+"B",d="<small>"+k.image.maximumFileSize+" : "+d+"</small>");this.$dialog=b.dialog({title:k.image.insert,fade:c.dialogsFade,body:'<div class="form-group note-group-select-from-files"><label>'+k.image.selectFromFiles+'</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" />'+d+'</div><div class="form-group" style="overflow:auto;"><label>'+k.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>',
footer:'<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+k.image.insert+"</button>"}).render().appendTo(a)};this.destroy=function(){b.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(a,b){a.on("keypress",function(a){a.keyCode===v.code.ENTER&&b.trigger("click")})};this.show=function(){a.invoke("editor.saveRange");this.showImageDialog().then(function(c){b.hideDialog(d.$dialog);a.invoke("editor.restoreRange");"string"===typeof c?a.invoke("editor.insertImage",
c):a.invoke("editor.insertImagesOrCallback",c)}).fail(function(){a.invoke("editor.restoreRange")})};this.showImageDialog=function(){return h.Deferred(function(c){var e=d.$dialog.find(".note-image-input"),g=d.$dialog.find(".note-image-url"),h=d.$dialog.find(".note-image-btn");b.onDialogShown(d.$dialog,function(){a.triggerEvent("dialog.shown");e.replaceWith(e.clone().on("change",function(){c.resolve(this.files||this.value)}).val(""));h.click(function(a){a.preventDefault();c.resolve(g.val())});g.on("keyup paste",
function(){var a=g.val();b.toggleBtn(h,a)}).val("");d.bindEnterKey(g,h)});b.onDialogHidden(d.$dialog,function(){e.off("change");g.off("keyup paste keypress");h.off("click");"pending"===c.state()&&c.reject()});b.showDialog(d.$dialog)})}},imagePopover:function(a){var d=h.summernote.ui,b=a.options;this.shouldInitialize=function(){return!l.isEmpty(b.popover.image)};this.initialize=function(){this.$popover=d.popover({className:"note-image-popover"}).render().appendTo("body");var e=this.$popover.find(".popover-content");
a.invoke("buttons.build",e,b.popover.image)};this.destroy=function(){this.$popover.remove()};this.update=function(a){e.isImg(a)?(a=e.posFromPlaceholder(a),this.$popover.css({display:"block",left:a.left,top:a.top})):this.hide()};this.hide=function(){this.$popover.hide()}},videoDialog:function(a){var d=this,b=h.summernote.ui,e=a.layoutInfo.editor,c=a.options,k=c.langInfo;this.initialize=function(){var a=c.dialogsInBody?h(document.body):e;this.$dialog=b.dialog({title:k.video.insert,fade:c.dialogsFade,
body:'<div class="form-group row-fluid"><label>'+k.video.url+' <small class="text-muted">'+k.video.providers+'</small></label><input class="note-video-url form-control span12" type="text" /></div>',footer:'<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+k.video.insert+"</button>"}).render().appendTo(a)};this.destroy=function(){b.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(a,b){a.on("keypress",function(a){a.keyCode===v.code.ENTER&&b.trigger("click")})};
this.createVideoNode=function(a){var b=a.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/),c=a.match(/\/\/instagram.com\/p\/(.[a-zA-Z0-9_-]*)/),d=a.match(/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/),e=a.match(/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/),g=a.match(/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/),k=a.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),l=a.match(/^.+.(mp4|m4v)$/),p=a.match(/^.+.(ogg|ogv)$/),
q=a.match(/^.+.(webm)$/);if(b&&11===b[1].length)a=b[1],a=h("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+a).attr("width","640").attr("height","360");else if(c&&c[0].length)a=h("<iframe>").attr("frameborder",0).attr("src",c[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(d&&d[0].length)a=h("<iframe>").attr("frameborder",0).attr("src",d[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class",
"vine-embed");else if(e&&e[3].length)a=h("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+e[3]).attr("width","640").attr("height","360");else if(g&&g[2].length)a=h("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+g[2]).attr("width","640").attr("height","360");else if(k&&k[1].length)a=h("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height",
"498").attr("width","510").attr("src","//player.youku.com/embed/"+k[1]);else if(l||p||q)a=h("<video controls>").attr("src",a).attr("width","640").attr("height","360");else return!1;a.addClass("note-video-clip");return a[0]};this.show=function(){var c=a.invoke("editor.getSelectedText");a.invoke("editor.saveRange");this.showVideoDialog(c).then(function(c){b.hideDialog(d.$dialog);a.invoke("editor.restoreRange");(c=d.createVideoNode(c))&&a.invoke("editor.insertNode",c)}).fail(function(){a.invoke("editor.restoreRange")})};
this.showVideoDialog=function(c){return h.Deferred(function(e){var g=d.$dialog.find(".note-video-url"),h=d.$dialog.find(".note-video-btn");b.onDialogShown(d.$dialog,function(){a.triggerEvent("dialog.shown");g.val(c).on("input",function(){b.toggleBtn(h,g.val())}).trigger("focus");h.click(function(a){a.preventDefault();e.resolve(g.val())});d.bindEnterKey(g,h)});b.onDialogHidden(d.$dialog,function(){g.off("input");h.off("click");"pending"===e.state()&&e.reject()});b.showDialog(d.$dialog)})}},helpDialog:function(a){var d=
this,b=h.summernote.ui,e=a.layoutInfo.editor,c=a.options,k=c.langInfo;this.createShortCutList=function(){var b=c.keyMap[t.isMac?"mac":"pc"];return Object.keys(b).map(function(c){var d=b[c],e=h('<div><div class="help-list-item"/></div>');e.append(h("<label><kbd>"+c+"</kdb></label>").css({width:180,"margin-right":10})).append(h("<span/>").html(a.memo("help."+d)||d));return e.html()}).join("")};this.initialize=function(){var a=c.dialogsInBody?h(document.body):e;this.$dialog=b.dialog({title:k.options.help,
fade:c.dialogsFade,body:this.createShortCutList(),footer:'<p class="text-center"><a href="//summernote.org/" target="_blank">Summernote 0.8.1</a> \u00b7 <a href="//github.com/summernote/summernote" target="_blank">Project</a> \u00b7 <a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a></p>',callback:function(a){a.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(a)};this.destroy=function(){b.hideDialog(this.$dialog);this.$dialog.remove()};
this.showHelpDialog=function(){return h.Deferred(function(c){b.onDialogShown(d.$dialog,function(){a.triggerEvent("dialog.shown");c.resolve()});b.showDialog(d.$dialog)}).promise()};this.show=function(){a.invoke("editor.saveRange");this.showHelpDialog().then(function(){a.invoke("editor.restoreRange")})}},airPopover:function(a){var d=this,b=h.summernote.ui,g=a.options;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){d.update()},"summernote.change summernote.dialog.shown":function(){d.hide()},
"summernote.focusout":function(a,b){t.isFF||b.relatedTarget&&e.ancestor(b.relatedTarget,p.eq(d.$popover[0]))||d.hide()}};this.shouldInitialize=function(){return g.airMode&&!l.isEmpty(g.popover.air)};this.initialize=function(){this.$popover=b.popover({className:"note-air-popover"}).render().appendTo("body");var c=this.$popover.find(".popover-content");a.invoke("buttons.build",c,g.popover.air)};this.destroy=function(){this.$popover.remove()};this.update=function(){var b=a.invoke("editor.currentStyle");
if(b.range&&!b.range.isCollapsed()){if(b=l.last(b.range.getClientRects()))b=p.rect2bnd(b),this.$popover.css({display:"block",left:Math.max(b.left+b.width/2,0)-20,top:b.top+b.height})}else this.hide()};this.hide=function(){this.$popover.hide()}}},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview",
"help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,direction:null,styleTags:"p blockquote pre h1 h2 h3 h4 h5 h6".split(" "),
fontNames:"Arial;Arial Black;Comic Sans MS;Courier New;Helvetica Neue;Helvetica;Impact;Lucida Grande;Tahoma;Times New Roman;Verdana".split(";"),fontSizes:"8 9 10 11 12 14 18 24 36".split(" "),colors:["#000000 #424242 #636363 #9C9C94 #CEC6CE #EFEFEF #F7F7F7 #FFFFFF".split(" "),"#FF0000 #FF9C00 #FFFF00 #00FF00 #00FFFF #0000FF #9C00FF #FF00FF".split(" "),"#F7C6CE #FFE7CE #FFEFC6 #D6EFD6 #CEDEE7 #CEE7F7 #D6D6E7 #E7D6DE".split(" "),"#E79C9C #FFC69C #FFE79C #B5D6A5 #A5C6CE #9CC6EF #B5A5D6 #D6A5BD".split(" "),
"#E76363 #F7AD6B #FFD663 #94BD7B #73A5AD #6BADDE #8C7BC6 #C67BA5".split(" "),"#CE0000 #E79439 #EFC631 #6BA54A #4A7B8C #3984C6 #634AA5 #A54A7B".split(" "),"#9C0000 #B56308 #BD9400 #397B21 #104A5A #085294 #311873 #731842".split(" "),"#630000 #7B3900 #846300 #295218 #083139 #003163 #21104A #4A1031".split(" ")],lineHeights:"1.0 1.2 1.4 1.5 1.6 1.8 2.0 3.0".split(" "),tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,
onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onSubmit:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull",
"CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline",
"CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},
icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",
unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",
unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})});